---
title: "React SDK"
description: "Documentation for ApexxCloud React SDK"
---

## Installation

<CodeGroup>

```bash npm
npm install @apexxcloud/react
```

```bash yarn
yarn add @apexxcloud/react
```

</CodeGroup>

## useApexxCloud Hook

A custom hook for granular control over the upload process.

### Basic Usage

```tsx
import { useApexxCloud } from "@apexxcloud/react";

function CustomUploader() {
  const { upload } = useApexxCloud();
  const [progress, setProgress] = useState(0);
  const abortController = useRef(new AbortController());

  // Function to get signed URLs from your backend
  const getSignedUrl = async (type: string, params: SignedUrlOptions) => {
    const response = await fetch(`/api/get-signed-url/${type}`, {
      method: "POST",
      body: JSON.stringify(params),
    });
    return response.text();
  };

  const handleUpload = async (file: File) => {
    try {
      await upload(getSignedUrl, file, {
        signal: abortController.current.signal,
        onStart: (event) => {
          console.log(`Starting upload: ${event.file.name}`);
        },
        onProgress: (event) => {
          setProgress(event.progress);
        },
        onComplete: (event) => {
          console.log("Upload complete:", event.response);
        },
        onError: (event) => {
          if (event.type === "abort") {
            console.log("Upload cancelled");
          } else {
            console.error("Upload failed:", event.error);
          }
        },
      });
    } catch (error) {
      console.error("Upload failed:", error);
    }
  };

  // Clean up on unmount
  useEffect(() => {
    return () => {
      abortController.current.abort();
    };
  }, []);

  return (
    <div>
      <input
        type="file"
        onChange={(e) => {
          const file = e.target.files?.[0];
          if (file) handleUpload(file);
        }}
      />
      <button onClick={() => abortController.current.abort()}>
        Cancel Upload
      </button>
      <progress value={progress} max="100" />
    </div>
  );
}
```

### Multipart Upload Example

```tsx
function MultipartUploader() {
  const { uploadMultipart } = useApexxCloud();
  const [progress, setProgress] = useState(0);
  const [partProgress, setPartProgress] = useState<Record<number, number>>({});
  const abortController = useRef(new AbortController());

  const handleUpload = async (file: File) => {
    try {
      await uploadMultipart(getSignedUrl, file, {
        signal: abortController.current.signal,
        partSize: 5 * 1024 * 1024, // 5MB chunks
        concurrency: 3, // Number of concurrent uploads
        onProgress: (event) => {
          setProgress(event.progress);
          setPartProgress((prev) => ({
            ...prev,
            [event.part.number]: event.part.progress,
          }));
        },
        onPartComplete: (part) => {
          console.log(`Part ${part.PartNumber} completed`);
        },
        onComplete: (event) => {
          console.log("Upload complete:", event.response);
        },
        onError: (event) => {
          console.error("Upload failed:", event.error);
          console.error("Failed during phase:", event.phase);
        },
      });
    } catch (error) {
      console.error("Upload failed:", error);
    }
  };

  return (
    <div>
      <input
        type="file"
        onChange={(e) => {
          const file = e.target.files?.[0];
          if (file) handleUpload(file);
        }}
      />
      <div>Overall Progress: {progress}%</div>
      {Object.entries(partProgress).map(([part, progress]) => (
        <div key={part}>
          Part {part}: {progress}%
        </div>
      ))}
    </div>
  );
}
```

### Hook Return Value

| Property          | Type                                                                                           | Description                     |
| ----------------- | ---------------------------------------------------------------------------------------------- | ------------------------------- |
| `upload`          | `(getSignedUrl: GetSignedUrlFn, file: File, options?: UploadOptions) => Promise<any>`          | Function for single file upload |
| `uploadMultipart` | `(getSignedUrl: GetSignedUrlFn, file: File, options?: MultipartUploadOptions) => Promise<any>` | Function for multipart upload   |

### Upload Options

| Option       | Type                             | Description                       |
| ------------ | -------------------------------- | --------------------------------- |
| `signal`     | `AbortSignal`                    | AbortSignal for cancelling upload |
| `onStart`    | `(event: StartEvent) => void`    | Called when upload starts         |
| `onProgress` | `(event: ProgressEvent) => void` | Called during upload progress     |
| `onComplete` | `(event: CompleteEvent) => void` | Called when upload completes      |
| `onError`    | `(event: ErrorEvent) => void`    | Called if upload fails            |

### Multipart Upload Options

Includes all Upload Options plus:

| Option           | Type                                | Description                                    |
| ---------------- | ----------------------------------- | ---------------------------------------------- |
| `partSize`       | `number`                            | Size of each part in bytes (default: 5MB)      |
| `concurrency`    | `number`                            | Number of concurrent part uploads (default: 3) |
| `onPartComplete` | `(part: PartCompleteEvent) => void` | Called when a part completes                   |

### Backend Implementation

See the [JavaScript SDK documentation](/sdks/frontend/javascript#backend-implementation) for details on implementing the backend signed URL endpoint.

## FileUploader Component

A React component that provides a drag-and-drop file upload interface with progress tracking and error handling.

### Basic Usage

```tsx
import { FileUploader } from "@apexxcloud/react";

function App() {
  const getSignedUrl = async (type: string, params: SignedUrlOptions) => {
    const response = await fetch("/api/get-signed-url", {
      method: "POST",
      body: JSON.stringify(params),
    });
    return response.text();
  };

  return (
    <FileUploader
      getSignedUrl={getSignedUrl}
      onUploadComplete={(response) => console.log("Upload complete:", response)}
    />
  );
}
```

### Props

| Prop               | Type                       | Required | Description                                                      |
| ------------------ | -------------------------- | -------- | ---------------------------------------------------------------- |
| `getSignedUrl`     | `GetSignedUrlFn`           | Yes      | Function to get signed URL for upload                            |
| `onUploadComplete` | `(response: any) => void`  | No       | Called when upload completes successfully                        |
| `onUploadError`    | `(error: Error) => void`   | No       | Called if upload fails                                           |
| `multipart`        | `boolean`                  | No       | Enable multipart upload (default: false)                         |
| `accept`           | `Record<string, string[]>` | No       | File type restrictions (e.g., `{ 'image/*': ['.png', '.jpg'] }`) |
| `maxSize`          | `number`                   | No       | Maximum file size in bytes                                       |
| `className`        | `string`                   | No       | Additional CSS class names                                       |

### Complete Example

```tsx
import { FileUploader } from "@apexxcloud/react";

function UploadComponent() {
  const getSignedUrl = async (type: string, params: SignedUrlOptions) => {
    const response = await fetch("/api/get-signed-url", {
      method: "POST",
      body: JSON.stringify(params),
    });
    return response.text();
  };

  return (
    <FileUploader
      getSignedUrl={getSignedUrl}
      multipart={true}
      accept={{
        "image/*": [".png", ".jpg", ".jpeg", ".gif"],
        "application/pdf": [".pdf"],
      }}
      maxSize={10 * 1024 * 1024} // 10MB
      onUploadComplete={(response) => {
        console.log("Upload successful:", response);
        // Handle success (e.g., show success message)
      }}
      onUploadError={(error) => {
        console.error("Upload failed:", error);
        // Handle error (e.g., show error message)
      }}
      className="max-w-lg mx-auto" // Custom styling
    />
  );
}
```

### Features

1. **Drag and Drop**

   - Visual feedback during drag operations
   - File type validation
   - Size restrictions

2. **Upload Progress**

   - Real-time progress bar
   - Percentage indicator
   - Cancel button during upload

3. **Error Handling**

   - Visual error messages
   - File validation errors
   - Upload failure handling

4. **Accessibility**
   - Keyboard navigation support
   - ARIA attributes
   - Focus management

## Requirements

- React 16.8+ (Hooks support)
- @apexxcloud/sdk-js as a peer dependency
